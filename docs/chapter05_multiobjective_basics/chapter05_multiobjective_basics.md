# 第5章 多目标优化基础

## 本章导读

多目标优化是处理多个冲突目标同时优化的重要工具，在机器人路径规划、资源分配等实际问题中有广泛应用。本章介绍多目标优化的基本概念、帕累托最优性理论和标量化方法。通过本章学习，你将理解多目标优化的本质特征，掌握寻找帕累托最优解的基本方法。

---

## 5.1 多目标优化问题

### 5.1.1 问题定义

**一般形式**

定义 5.1（多目标优化问题） **多目标优化问题**（Multi-objective Optimization Problem, MOP）的形式为：

$$\begin{align}
\min_{x} \quad & F(x) = (f_1(x), f_2(x), \ldots, f_m(x))^T \\
\text{s.t.} \quad & g_i(x) \leq 0, \quad i = 1, \ldots, p \\
& h_j(x) = 0, \quad j = 1, \ldots, q
\end{align}$$

其中：
- $x \in \mathbb{R}^n$ 是决策变量
- $f_k: \mathbb{R}^n \to \mathbb{R}$（$k = 1, \ldots, m$）是目标函数
- $m \geq 2$ 是目标个数
- $g_i$ 和 $h_j$ 是不等式和等式约束

**可行集与像集**

定义 5.2（可行集） **可行集**（feasible set）定义为：
$$\mathcal{X} = \{x \in \mathbb{R}^n : g_i(x) \leq 0, h_j(x) = 0, \forall i, j\}$$

定义 5.3（像集） **像集**（image set）或**目标空间**定义为：
$$\mathcal{Y} = F(\mathcal{X}) = \{F(x) : x \in \mathcal{X}\} \subseteq \mathbb{R}^m$$

### 5.1.2 多目标与单目标的区别

**本质区别**

单目标优化有唯一最优值，而多目标优化通常不存在使所有目标同时最优的解。

**例 5.1 购买决策**

购买商品时考虑：
- $f_1$：价格（越低越好）
- $f_2$：质量（越高越好）

通常价格低的商品质量差，质量好的商品价格高，两个目标冲突。

**例 5.2 机器人路径规划**

规划路径时考虑：
- $f_1$：路径长度（越短越好）
- $f_2$：安全性（越高越好）
- $f_3$：能量消耗（越少越好）

短路径可能经过危险区域，安全路径可能较长。

### 5.1.3 目标空间中的序关系

**分量-wise 序**

定义 5.4（支配关系） 设 $y^{(1)}, y^{(2)} \in \mathbb{R}^m$：
- $y^{(1)} \leq y^{(2)}$：$y_k^{(1)} \leq y_k^{(2)}$ 对所有 $k$ 成立
- $y^{(1)} < y^{(2)}$：$y_k^{(1)} < y_k^{(2)}$ 对所有 $k$ 成立
- $y^{(1)} \lneqq y^{(2)}$：$y^{(1)} \leq y^{(2)}$ 且 $y^{(1)} \neq y^{(2)}$

**严格支配**

定义 5.5（严格支配） $y^{(1)}$ **严格支配** $y^{(2)}$（记为 $y^{(1)} \prec y^{(2)}$），如果：
$$y_k^{(1)} \leq y_k^{(2)}, \forall k \quad \text{且} \quad \exists j: y_j^{(1)} < y_j^{(2)}$$

---

## 5.2 帕累托最优性

### 5.2.1 帕累托最优的定义

**帕累托支配**

定义 5.6（帕累托支配） 设 $x^{(1)}, x^{(2)} \in \mathcal{X}$：
- $x^{(1)}$ **帕累托支配** $x^{(2)}$（记为 $x^{(1)} \prec_P x^{(2)}$），如果 $F(x^{(1)}) \prec F(x^{(2)})$

**帕累托最优解**

定义 5.7（帕累托最优解） 可行解 $x^* \in \mathcal{X}$ 称为**帕累托最优解**（Pareto optimal solution），如果不存在 $x \in \mathcal{X}$ 使得 $x \prec_P x^*$。

等价表述：$x^*$ 是帕累托最优的，如果：
- 若 $f_k(x) \leq f_k(x^*)$ 对所有 $k$ 成立
- 则 $f_k(x) = f_k(x^*)$ 对所有 $k$ 成立

**帕累托最优集与前沿**

定义 5.8（帕累托最优集） **帕累托最优集**（Pareto optimal set）定义为：
$$\mathcal{X}_P = \{x \in \mathcal{X} : x \text{ 是帕累托最优的}\}$$

定义 5.9（帕累托前沿） **帕累托前沿**（Pareto front）定义为：
$$\mathcal{Y}_P = F(\mathcal{X}_P) = \{F(x) : x \in \mathcal{X}_P\}$$

### 5.2.2 帕累托最优的几何意义

**二维情形**

在目标空间 $\mathbb{R}^2$ 中，帕累托前沿通常是一条曲线（或曲线段）。

对于最小化问题，帕累托前沿位于目标空间的"左下边界"。

**例 5.3** 设 $f_1(x) = x^2$，$f_2(x) = (x-1)^2$，$x \in [0, 1]$。

帕累托最优解：$x \in [0, 1]$ 都是帕累托最优的。

帕累托前沿：从 $(0, 1)$ 到 $(1, 0)$ 的曲线。

### 5.2.3 弱帕累托最优

定义 5.10（弱帕累托最优） 可行解 $x^* \in \mathcal{X}$ 称为**弱帕累托最优解**，如果不存在 $x \in \mathcal{X}$ 使得 $f_k(x) < f_k(x^*)$ 对所有 $k$ 成立。

**关系**：
- 帕累托最优 $\Rightarrow$ 弱帕累托最优
- 反之不成立

### 5.2.4 真帕累托最优

定义 5.11（真帕累托最优） 帕累托最优解 $x^*$ 称为**真帕累托最优**（properly Pareto optimal），如果存在常数 $M > 0$ 使得：
$$\frac{f_k(x^*) - f_k(x)}{f_j(x) - f_j(x^*)} \leq M$$

对所有 $k$ 和满足 $f_k(x) < f_k(x^*)$，$f_j(x) > f_j(x^*)$ 的 $j$ 成立。

这排除了"病态"的帕累托最优解。

---

## 5.3 标量化方法

### 5.3.1 加权和方法

**基本思想**

将多个目标加权求和，转化为单目标问题：
$$\min_{x \in \mathcal{X}} \sum_{k=1}^m w_k f_k(x)$$

其中 $w_k \geq 0$，$\sum_k w_k = 1$。

**定理 5.1** 设 $w_k > 0$ 对所有 $k$。若 $x^*$ 是加权问题的最优解，则 $x^*$ 是帕累托最优的。

*证明*：假设 $x^*$ 不是帕累托最优，则存在 $x$ 使得 $f_k(x) \leq f_k(x^*)$ 对所有 $k$ 且至少一个严格不等式。于是：
$$\sum_k w_k f_k(x) < \sum_k w_k f_k(x^*)$$

与 $x^*$ 是最优解矛盾。$\square$

**局限性**
- 只能得到凸帕累托前沿上的点
- 非凸前沿上的点无法获得

### 5.3.2 ε-约束方法

**基本思想**

保留一个目标，将其他目标转化为约束：
$$\begin{align}
\min_{x \in \mathcal{X}} \quad & f_j(x) \\
\text{s.t.} \quad & f_k(x) \leq \varepsilon_k, \quad k \neq j
\end{align}$$

**定理 5.2** 若 $x^*$ 是 ε-约束问题的最优解，则 $x^*$ 是弱帕累托最优的。

**优点**
- 可以得到非凸帕累托前沿上的点
- 通过调整 $\varepsilon$ 可以探索整个前沿

### 5.3.3 目标规划法

**基本思想**

对每个目标设定目标值 $z_k^*$，最小化偏差：
$$\min_{x \in \mathcal{X}} \sum_{k=1}^m |f_k(x) - z_k^*|$$

或加权形式：
$$\min_{x \in \mathcal{X}} \sum_{k=1}^m w_k |f_k(x) - z_k^*|$$

### 5.3.4 理想点法

定义 5.12（理想点） **理想点**（ideal point）$z^*$ 定义为：
$$z_k^* = \min_{x \in \mathcal{X}} f_k(x), \quad k = 1, \ldots, m$$

通常理想点不可达，但可以作为参考点。

**到理想点的距离**

最小化到理想点的距离：
$$\min_{x \in \mathcal{X}} d(F(x), z^*)$$

常用距离：
- 欧几里得距离：$d(y, z^*) = \sqrt{\sum_k (y_k - z_k^*)^2}$
- 切比雪夫距离：$d(y, z^*) = \max_k |y_k - z_k^*|$

---

## 5.4 多目标优化在机器人中的应用

### 5.4.1 机器人路径规划

**问题描述**

规划从起点到终点的路径，同时优化：
- 路径长度
- 平滑度
- 安全性（与障碍物距离）
- 能量消耗

**建模**

设路径由路点 $x_1, x_2, \ldots, x_T$ 表示：
$$\begin{align}
\min \quad & f_1 = \sum_{t=1}^{T-1} \|x_{t+1} - x_t\| \quad \text{(长度)} \\
\min \quad & f_2 = -\min_{t, o} \|x_t - o\| \quad \text{(安全性)} \\
\min \quad & f_3 = \sum_{t=2}^{T-1} \|x_{t+1} - 2x_t + x_{t-1}\|^2 \quad \text{(平滑度)}
\end{align}$$

### 5.4.2 机械臂轨迹优化

**问题描述**

优化机械臂运动轨迹，同时考虑：
- 执行时间
- 关节力矩
- 末端精度
- 避障

**帕累托前沿分析**

通过多目标优化，可以得到不同权重下的最优轨迹，帮助工程师权衡各项性能指标。

### 5.4.3 多机器人任务分配

**问题描述**

将任务分配给多个机器人，优化：
- 总完成时间
- 能量消耗
- 负载均衡

---

## 5.5 本章小结

本章介绍了多目标优化的基础理论：

1. **多目标优化问题**：
   - 多个冲突目标同时优化
   - 可行集与像集

2. **帕累托最优性**：
   - 帕累托支配关系
   - 帕累托最优解、帕累托最优集、帕累托前沿
   - 弱帕累托最优和真帕累托最优

3. **标量化方法**：
   - 加权和法
   - ε-约束法
   - 目标规划法
   - 理想点法

4. **机器人应用**：
   - 路径规划
   - 轨迹优化
   - 任务分配

多目标优化为处理实际工程问题中的多准则决策提供了系统的方法。

---

## 习题

### 基础题

5.1 证明：若 $x^*$ 是帕累托最优解，则 $x^*$ 是弱帕累托最优解。

5.2 用加权和法求解：$\min (f_1 = x^2, f_2 = (x-2)^2)$，$x \in [0, 2]$。

5.3 解释为什么加权和法不能得到非凸帕累托前沿上的所有点。

5.4 计算理想点和反理想点（nadir point）的区别。

### 提高题

5.5 证明：对于凸多目标优化问题，每个帕累托最优解都是某个加权问题的最优解。

5.6 设计一个 ε-约束方法的算法框架。

5.7 分析目标规划法中不同距离度量（$l_1$, $l_2$, $l_\infty$）的影响。

5.8 将机器人路径规划问题建模为多目标优化问题。

### 编程题

5.9 实现加权和法，求解一个双目标优化测试问题（如 ZDT1）。

5.10 实现 ε-约束法，并可视化帕累托前沿。

---

## 参考文献

1. Miettinen K. Nonlinear Multiobjective Optimization[M]. Springer, 1999.
2. Deb K. Multi-Objective Optimization Using Evolutionary Algorithms[M]. Wiley, 2001.
3. Ehrgott M. Multicriteria Optimization[M]. Springer, 2005.
4. Coello C A C, Lamont G B, Van Veldhuizen D A. Evolutionary Algorithms for Solving Multi-Objective Problems[M]. Springer, 2007.
